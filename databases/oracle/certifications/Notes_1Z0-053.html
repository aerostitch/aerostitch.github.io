<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="generator" content="AsciiDoc 8.6.7" />
<meta name="description" content="This document is regrouping my personal notes I took while revising for the 1Z0-053 Oracle certification exam." />
<meta name="keywords" content="Oracle, Database, Certified, Professionnal, Certification, exam, 1Z0-052, 11gR2" />
<meta name="author" content="Joseph HERLANT" />
<link rel="shortcut icon" href="/custom_/ico/favicon.png" />
<title>Notes for exams 1Z0-053</title>
<link rel="stylesheet" href="/custom_/css/asciidoc.css" type="text/css" />


<script type="text/javascript" src="/custom_/js/asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
<!-- Bootstrap core CSS -->
<!--<link href="/twbs_/css/bootstrap.css" rel="stylesheet" />-->
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" />
<!-- Bootstrap theme -->
<!--<link href="/twbs_/css/bootstrap-theme.min.css" rel="stylesheet" />-->
<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css" rel="stylesheet" />
<!-- Custom styles for this template -->
<link href="/custom_/css/theme.css" rel="stylesheet" />
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6.2pre/html5shiv.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.min.js"></script>
<![endif]-->
</head>
<body class="article">
   <!-- Fixed navbar -->
    <div class="navbar navbar-inverse navbar-fixed-top">
    <!-- These are for smartphones -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="/">aerostitch's tips</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav" id="menu_left">
          <li></li>
          <!-- Here will stand the menu bar generated on page load by a jquery script -->
          </ul>
          <!--
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Bla</a></li>
            <li><a href="#">Bla</a></li>
            <li class="active"><a href="./">Active</a></li>
          </ul>
          -->
        </div><!--/.nav-collapse -->
      </div>
    </div>
<div id="content">
    <div class="container theme-showcase">
    <div class="row row-offcanvas row-offcanvas-right">

      <div class="col-xs-12 col-sm-9 col-md-9 cold-lg-9">
        <div class="right-aligned-div menu-indicator menu-indicator-asciidoc">
          Navigation menu and tocs are just this way
          <span class="glyphicon glyphicon-chevron-right"></span>
        </div>

<div>
  <span id="author">Joseph HERLANT</span>
  <br />
  <span id="revnumber">version 1.0.2,</span>
  <span id="revdate">2013-10-19</span>
  <span id="revremark">: little modification in the introduction warning</span>
</div>
      <!-- Main jumbotron for a primary marketing message or call to action -->
      <div class="jumbotron">
<div id="header">
<h1>Notes for exams 1Z0-053</h1>
This document is regrouping my personal notes I took while revising for the 1Z0-053 Oracle certification exam.
</div>
      </div>
<div id="preamble">
<div class="sectionbody">
<div class="panel panel-warning admonitionblock">
  <div class="panel-heading">

<span class="glyphicon glyphicon-warning-sign"></span>



    <b class="panel-title">
    Warning
    </b>
  </div>
  <div class="panel-body">This document is my personnal notes I took when reading the
"OCA/OCP Oracle Database 11g: All-in-One Exam Guide" to prepare 1Z0-053 exam.<br />
This is not a complete review of the exams topics, just the ones I either
having hard time to remember or just found interesting to keep track of.  </div>
</div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4"
class="table">
<caption class="title">Table 1. Exams to chapters matching in book "OCA/OCP Oracle Database 11g: All-in-One Exam Guide"</caption>
<col width="50%" />
<col width="50%" />
<thead>
<tr>
<th align="left" valign="top"> Exam    </th>
<th align="left" valign="top"> Corresponding chapters</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">1Z0-051</p></td>
<td align="left" valign="top"><p class="table">7,8,9,10,11,12,13</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">1Z0-052</p></td>
<td align="left" valign="top"><p class="table">1,2,3,4,5,6,7,8,14,15,16,23,24,25,27</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">1Z0-053</p></td>
<td align="left" valign="top"><p class="table">14,15,16,17,18,19,20,21,22,23,25,26,27</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_14_configuring_the_db_for_backup_and_recovery">1. Chapter 14: Configuring the DB for Backup and recovery</h2>
<div class="sectionbody">
<div class="paragraph"><p>Can a <code>shutdown abort</code> corrupt a database? No, it is impossible to corrupt the database using these types of commands.</p></div>
<div class="paragraph"><p>At instance startup, the roll forward phase reconstructs UNDO segments in memory and buffer cache from the active and current redo logs to enable the rollback phase.</p></div>
<div class="paragraph"><p>Instance recovery never needs an ARCHIVED redo log file.</p></div>
<div class="paragraph"><p>MTTR (&#8594; Mean Time To Recover) can be controlled by the <code>FAST_START_MTTR_TARGET</code> (which defaults to 0, that means UNLIMITED). This initialization parameter makes the DWR work more harder to ensure that the time between the checkpoint time (in the redo) and the current time tend to be near the value of this particular parameter. This parameter also enables "checkpoint auto-tunning".</p></div>
<div class="paragraph"><p>When <code>FAST_START_MTTR_TARGET</code> is set to a nonzero value, it will override the <code>LOG_CHECKPOINT_INTERVAL</code>.</p></div>
<div class="paragraph"><p>MTTR Advisor can be seen through <code>V$INSTANCE_RECOVERY</code> view.</p></div>
<div class="paragraph"><p>Full checkpoint only occurs with orderly shutdown or by user request (<code>alter system checkpoint</code>).</p></div>
<div class="paragraph"><p>Partial checkpoint occurs while:</p></div>
<div class="ulist"><ul>
<li>
<p>
taking a tablespace or a datafile offline
</p>
</li>
<li>
<p>
dropping a segment
</p>
</li>
<li>
<p>
truncating a table
</p>
</li>
<li>
<p>
putting a tablespace in backup mode
</p>
</li>
</ul></div>
<div class="paragraph"><p>An instance can have up to 8 multiplexed copies of a controlfile.</p></div>
<div class="paragraph"><p><code>DB_RECOVERY_FILE_DEST_SIZE</code> must be set <strong>before</strong> attempting to set <code>DB_RECOVERY_FILE_DEST</code>.</p></div>
<div class="paragraph"><p><u>Test:</u> 3 errors Q1,3,6 (2013-03-28)</p></div>
<div class="paragraph"><p><u>Test:</u> 0 error (2013-05-07)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_15_backup_with_rman">2. Chapter 15: Backup with RMAN</h2>
<div class="sectionbody">
<div class="paragraph"><p>An <code>OPEN</code> backup can only be made if the database is in <code>ARCHIVELOG</code> mode.</p></div>
<div class="paragraph"><p>In <code>NOARCHIVELOG</code> mode, backup of database can only be done with database closed (<code>MOUNT</code> mode after a <strong>CLEAN</strong> shutdown).</p></div>
<div class="paragraph"><p>Files that cannot be backed up with RMAN are:</p></div>
<div class="ulist"><ul>
<li>
<p>
TEMPFILES
</p>
</li>
<li>
<p>
ONLINE REDO LOG
</p>
</li>
<li>
<p>
PASSWORD FILE
</p>
</li>
<li>
<p>
Static PFILE
</p>
</li>
<li>
<p>
Oracle NET configuration files
</p>
</li>
</ul></div>
<div class="paragraph"><p>If there is no level 0 backup, then the first level 1 differential or cumulative backup will in fact perform a level 0 backup!</p></div>
<div class="paragraph"><p>Incremental backups &#8658; all changed blocks since the <strong>last incremental</strong> backup (which could be either a level 0 or a level 1)</p></div>
<div class="paragraph"><p>Cumulative backups &#8658; all changed blocks since the <strong>last level 0</strong> backup.</p></div>
<div class="paragraph"><p>An image copy is a backup file that is identical to the input file.</p></div>
<div class="paragraph"><p>An image copy can be used immediately, without a restore operation. Backupsets always need a restore operation to be usable.</p></div>
<div class="paragraph"><p>Tape channels, compression, incremental backups <strong>CANNOT</strong> be used with image copy backups.</p></div>
<div class="paragraph"><p>RMAN generates 3 types of sessions against the database:</p></div>
<div class="ulist"><ul>
<li>
<p>
one <code>default session</code>: invokes the kernelized (available before DB is mounted) PL/SQL that implements RMAN.
</p>
</li>
<li>
<p>
one <code>pooling sesion</code>: monitors the progress of RMAN operations
</p>
</li>
<li>
<p>
one ore more <code>channel session</code>: reads and writes on a disk or tape. One by user-defined (or defaults) channels.
</p>
</li>
</ul></div>
<div class="paragraph"><p>RMAN&#8217;s parallelism (# of channels) cannot exceed the number of input (if the multisection backup is disabled) and output files.</p></div>
<div class="paragraph"><p>Default RMAN encryption requires a wallet and will be AES128. Alternatively, a password or longer keys can be specified.</p></div>
<div class="paragraph"><p><code>CONFIGURE BACKUP OPTIMIZATION ON;</code> allows RMAN not to backup certain files if it considers it already has suffiscient copies of the files (related to retention policy). For read-write datafiles, it will never have identical copies of the file.</p></div>
<div class="paragraph"><p><code>DELETE EXPIRED;</code> will not delete anything on disk, only the references marked as expired in the RMAN repository.</p></div>
<div class="paragraph"><p><code>DELETE OBSOLETE;</code> will delete files and update the repository accordingly.</p></div>
<div class="paragraph"><p>RMAN stores its repository on controlfile &#8658; loss of it means no restore possible! RMAN Recovery Catalog avoids this.</p></div>
<div class="paragraph"><p>If you use LOG_ARCHIVE_DEST or LOG_ARCHIVE_DUPLEX_DEST, these locations must be disks (Filesystems or ASM). It cannot be another Oracle instance.</p></div>
<div class="paragraph"><p>If a MANDATORY archive destination is unavailable, the database will shut down.</p></div>
<div class="paragraph"><p>Control files and redo logs are considered as permanent. A copy of the controlfile and each online log is kept in the FRA. Archivelog and backups are considered as transient.</p></div>
<div class="paragraph"><p><u>Test:</u> 3 errors Q2,5,10 (2013-03-31)</p></div>
<div class="paragraph"><p><u>Test:</u> 1 error Q5 (2013-05-07)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_16_restore_and_recover_with_rman">3. Chapter 16: Restore and recover with RMAN</h2>
<div class="sectionbody">
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
ADR
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
Automatic Diagnostic Repository
</p>
</td>
</tr>
</table></div>
<div class="paragraph"><p>Health monitor will run reactively or on demand and will write errors details to the ADR.</p></div>
<div class="paragraph"><p>Health monitor&#8217;s PL/SQL package &#8658; DBMS_HM</p></div>
<div class="ulist"><div class="title">Actions that do the Health Monitor</div><ul>
<li>
<p>
In NOMOUNT mode, checks the "DB structure integrity" (integrity of the controlfiles)
</p>
</li>
<li>
<p>
In MOUNT mode, checks:
</p>
<div class="ulist"><ul>
<li>
<p>
the "DB structure integrity" (integrity of the controlfiles + online redo logs and datafile headers)
</p>
</li>
<li>
<p>
the "Redo Integrity check" (online and archived logfiles accessibility and corruptions)
</p>
</li>
</ul></div>
</li>
<li>
<p>
In OPEN mode:
</p>
<div class="ulist"><ul>
<li>
<p>
scans every data block for corruption
</p>
</li>
<li>
<p>
checks data dictionnary integrity
</p>
</li>
<li>
<p>
checks undo segments integrity
</p>
<div class="dlist"><dl>
<dt class="hdlist1">
DRA
</dt>
<dd>
<p>
Data Recovery Advisor : makes the use of informations gathered by the Health Monitor to find problems and contructs RMAN scripts to repair them. It can do nothing unless the instance is in nomount mode or higher.
</p>
</dd>
</dl></div>
</li>
</ul></div>
</li>
</ul></div>
<div class="paragraph"><p>If one or more failure exists, then you should typically use:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<code>LIST FAILURE;</code> RMAN command to show informations about the failure
</p>
</li>
<li>
<p>
<code>ADVISE FAILURE;</code> RMAN command <strong>in the SAME RMAN session</strong> to obtain a report of repair. DRA will not generate any advice if you have not first asked it to the list the failures. Fixed failures or occurence since last listing will not be advised upon.
</p>
</li>
<li>
<p>
<code>REPAIR FAILURE;</code> RMAN command <strong>in the SAME RMAN session</strong> to automatically run the generated repair script
</p>
</li>
</ol></div>
<div class="paragraph"><p>DRA will function only for a single-instance database. It cannot work with a RAC clustered database, nor against a DataGuard standby database.</p></div>
<div class="paragraph"><p>In <strong>NOarchivelog</strong> mode, the corruption of a datafile will mean full resore and a clear of the logfile groups using <code>ALTER DATABASE CLEAR LOGFILE GROUP &lt;group_number&gt;;</code>. This recreates the specified logfile group. Other solution would be to drop the relevant tablespace&#8230;</p></div>
<div class="paragraph"><p>In <strong>NOarchivelog</strong> mode, restoring an incremental backup will need the use of <code>RECOVER DATABASE NOREDO;</code> command after the full backup restore.</p></div>
<div class="paragraph"><p>RMAN will always apply incremental backups in preference to applying redo data (if they are available).</p></div>
<div class="paragraph"><p>SYSTEM and/or active UNDO tablespaces and/or any controlfile copy corruption will all bring database down.</p></div>
<div class="paragraph"><p>Other tablespaces' datafile corruption &#8658; datafile will be brought offline (and the rest of the database will remain open).</p></div>
<div class="paragraph"><p>Incomplete recovery is necessary if there is a missing archivelog or if all members of the current online redo log file group are missing.</p></div>
<div class="paragraph"><p>Autobackup of controlfile and spfile will rely on DBID, so keep the DBID in your documentation.</p></div>
<div class="paragraph"><p><code>RESTORE CONTROLFILE|SPFILE FROM AUTOBACKUP|'&lt;file_path&gt;';</code> are the only RMAN commands that can be executed in NOMOUNT mode.</p></div>
<div class="paragraph"><p>In RMAN, the <code>SET</code> commands (SET UNTIL, NEWNAME, DBID,&#8230;) can <strong>only</strong> be executed in a <strong>run block</strong>.</p></div>
<div class="paragraph"><p>Block corruptions will not take the datafile offline. RMAN can detect them as it performs backup operations and repair them automatically.</p></div>
<div class="paragraph"><p>To manually recover a block using RMAN, use the <code>block recover datafile &lt;datafile_number&gt; block &lt;coma_separated_block_numbers_to_recover&gt;;</code>.</p></div>
<div class="paragraph"><p>If you use the backup with the MAXCORRUPT option, you can revover corrupted blocks using <code>block recover corruption list [until SYSDATE-7];</code>(for example). The "until sysdate - 7" would recover from a backup at least older than 7 days.</p></div>
<div class="paragraph"><p><u>Test:</u> 4 errors Q1,6,9,15 (2013-03-31)</p></div>
<div class="paragraph"><p><u>Test:</u> 4 error Q6,9,11,15 (2013-05-07)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_17_advanced_rman_facilities">4. Chapter 17: Advanced RMAN facilities</h2>
<div class="sectionbody">
<div class="paragraph"><p>When using rman recovery catalog, RMAN repository is also be stored in the controlfile of the target database.</p></div>
<div class="paragraph"><p>The retention of the RMAN repository contained in the controlfile is controlled by the <code>CONTROLFILE_RECORD_KEEP_TIME</code> parameter that defaults to 7 days. The recovery catalog can retain data indefinitely.</p></div>
<div class="paragraph"><p>The user owning the recovery catalog must have the <code>RECOVERY_CATALOG_OWNER</code> role.</p></div>
<div class="paragraph"><p>The RMAN executable must be the same release as the TARGET database, but it does not need to be the same version as the catalog.</p></div>
<div class="paragraph"><p>The RMAN catalog must be <strong>CREATED</strong> with a version of RMAN that is equal or higher than the version of any database that will be registered in it.</p></div>
<div class="paragraph"><p>If you are using synchronous I/O but you have set BACKUP_DISK_IO_SLAVES init parameter, then the I/O performance is monitored in the V$BACKUP_ASYNC_IO.</p></div>
<div class="paragraph"><p><u>Test:</u> 1 error Q3 (2013-04-01)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_18_user_managed_backup_restore_and_recovery">5. Chapter 18: User-managed Backup, restore and recovery</h2>
<div class="sectionbody">
<div class="paragraph"><p>Recovery from loss of a <strong>multiplexed online redo log</strong> can be done while the database is open (whereas for controlfiles it cannot), and therefore does not entail any database. Use the <code>ALTER DATABASE CLEAR LOGFILE GROUP &lt;group_number&gt;;</code> command when the given group is inactive to recreate the members on disk.</p></div>
<div class="paragraph"><p>To recover from the loss of a tempfile, create a new one and drop the old one. This can be done online.</p></div>
<div class="paragraph"><p><code>V$RECOVER_FILE</code> is the list of all datafiles found to be damaged or missing. Available in both mount or open mode.</p></div>
<div class="paragraph"><p>In <strong>NOarchivelog</strong> mode, the loss of a datafile will always result in a complete restore of the database.</p></div>
<div class="paragraph"><p>A <code>RECOVER DATABASE UNTIL ...;</code> will stop immediately <strong>BEFORE</strong> applying the change vector of the nominated time or SCN (<em>not immediately after</em>).</p></div>
<div class="paragraph"><p><u>Test:</u> 1 error Q2 (2013-04-01)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_19_flashback">6. Chapter 19: Flashback</h2>
<div class="sectionbody">
<div class="paragraph"><p>Flashback Database (and other flashback technologies) will not back out physical corruption</p></div>
<div class="sect2">
<h3 id="_flashback_database">6.1. Flashback Database</h3>
<div class="paragraph"><p>Flashback Database relies on flashback logs AND redo logs.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
RVWR
</dt>
<dd>
<p>
Recovery writer. It writes data from the <code>flashback buffer</code> (area of memory in the SGA) to the flashback logs (on disk) which are complete block images, not vector changes.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>Flashback logs cannot be multiplexed and are not archived. Their management and creation is automatic.</p></div>
<div class="paragraph"><p>Flashback Database requires flashback logs, the Archivelog mode and the use of <code>OPEN RESETLOGS</code> after the flashback.</p></div>
<div class="paragraph"><p>To configure Flashback Database:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Archivelog mode
</p>
</li>
<li>
<p>
Configure a FRA
</p>
</li>
<li>
<p>
Set <code>DB_FLASHBACK_RETENTION_TARGET</code> (in minutes)
</p>
</li>
<li>
<p>
shutdown and startup mount
</p>
</li>
<li>
<p>
<code>ALTER DATABASE FLASHBACK ON</code>
</p>
</li>
<li>
<p>
Open database
</p>
</li>
</ol></div>
<div class="paragraph"><p>To get the status of the Flashback technology, use <code>SELECT flashback_on from V$DATABASE|V$TABLESPACE;</code>.</p></div>
<div class="paragraph"><p>To list Flashback Database logs, use <code>V$FLASHBACK_DATABASE_LOG</code>.</p></div>
<div class="paragraph"><p>Flashback Database statistics are in the <code>V$FLASHBACK_DATABASE_STAT</code>.</p></div>
<div class="paragraph"><p>To Flashback a database:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
Shutdown and startup mount
</p>
</li>
<li>
<p>
Flashback to a time, SCN or sequence
</p>
</li>
<li>
<p>
Open resetlogs
</p>
</li>
</ol></div>
<div class="paragraph"><p>Flashback Database is the only way to recover a schema other than an incomplete recovery.</p></div>
<div class="paragraph"><p>If there is not enough room in the FRA for the Flashback Data, <strong>nothing but FLASHBACK DATA</strong> will be deleted in the FRA!</p></div>
<div class="paragraph"><p>If Flashback logging is impacting adversely on performance, the only thing to do is to stop flashback logging for some tablespaces.</p></div>
</div>
<div class="sect2">
<h3 id="_flashback_query">6.2. Flashback Query</h3>
<div class="paragraph"><p>Flashback Query (the 3 variations) relies on the use of UNDO segments to reconstruct data as it were in a certain point in time.</p></div>
<div class="paragraph"><p>You can query tables as of an earlier point in time, but you can never execute DML against the older version of the data.</p></div>
<div class="paragraph"><p>Flashback Version Query cannot work against external and temporary tables, nor against V$ views.</p></div>
<div class="paragraph"><p>Work done by the <code>DBMS_FLASHBACK.BACKOUT_TRANSACTION</code> will be left <strong>UNCOMMITED</strong>. You&#8217;ll have to commit them manually to finish the recover.</p></div>
<div class="paragraph"><p>Only Flashback Table requires row movement. Flashback Transaction <strong>DO NOT</strong>.</p></div>
<div class="paragraph"><p>To flash back 2 tables in a foreign key relationship, flashback both tables in one operation.</p></div>
</div>
<div class="sect2">
<h3 id="_flashback_drop">6.3. Flashback DROP</h3>
<div class="paragraph"><p>Flashback Drop will <strong>not</strong> be able to flashback a <code>TRUNCATE</code> !</p></div>
<div class="paragraph"><p>In a flash back Drop, the table, associated indexes and permissions will be restored.</p></div>
<div class="paragraph"><p>Flashback Drop is not available for tables in the SYSTEM tablespace. Those ones are purged immediately.</p></div>
<div class="paragraph"><p><code>DBA_SEGMENTS</code> contains RECYCLE BIN segments whereas <code>DBA_FREE_SPACE</code> will not take them in account!</p></div>
<div class="paragraph"><p>No constraint go to the recycle bin.</p></div>
</div>
<div class="sect2">
<h3 id="_flash_back_data_archive">6.4. Flash Back Data Archive</h3>
<div class="paragraph"><p>A Flash Back Data Archive (FBDA) is enabled for a table. It will create another table that will store any versions of the rows of the tables. Retention can be years.</p></div>
<div class="paragraph"><p>DROP, TRUNCATE and column DROP cannot be executed against a table using FBDA.</p></div>
<div class="paragraph"><p><u>Test:</u> 7 errors Q1,7,9,10,12,16,17 (2013-04-03)</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_20_automatic_storage_management">7. Chapter 20: Automatic Storage Management</h2>
<div class="sectionbody">
<div class="paragraph"><p>Oracle Cluster Services are required on the host in order to setup the communication between the RDBMS instance and the ASM instance.</p></div>
<div class="paragraph"><p>You can use ASM only for database and recovery files. <strong>Not</strong> for Oracle Home, Alert log, trace files, passord files and Static PFILE.</p></div>
<div class="paragraph"><p>ASM Mirroring defaults to a single mirror, but can be set to <code>NONE</code> or <code>DOUBLE</code>.</p></div>
<div class="paragraph"><p>Stripping is automatic and cannot be disabled.</p></div>
<div class="paragraph"><p>ASM is a management and control facility that makes files available. It does not do the actual I/O work.</p></div>
<div class="paragraph"><p>An ASM instance cannot mount or open a database.</p></div>
<div class="paragraph"><p>You can only connect to an ASM instance using a password file or OS authentication.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
RBAL and ARBn
</dt>
<dd>
<p>
are ASM-specific background processes used to rebalance activity (movement of data between disks, changing in stripping or adding disks). RBAL coordinates rebalancing on the ASM instance. ARBn processes does the work.
</p>
</dd>
</dl></div>
<div class="paragraph"><p>A rebalancing operation will start automatically in response to a disk group reconfiguration.</p></div>
<div class="paragraph"><p>On the <strong>RDBMS</strong> instance:</p></div>
<div class="ulist"><ul>
<li>
<p>
the <code>RBAL</code> process locate ASM disks through the ASM instance and opens it
</p>
</li>
<li>
<p>
the <code>ASMB</code> process creates a session against the ASM instance, continuously connected to pass the physical change orders and various statistics and status messages
</p>
</li>
</ul></div>
<div class="paragraph"><p>Required fields in an ASM instance parameter file are:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>Instance type</code> (must be set to <em>ASM</em>)
</p>
</li>
<li>
<p>
<code>ASM_DISKSTRING</code> that is the list of path identifying the disks to be given to ASM
</p>
</li>
</ul></div>
<div class="paragraph"><p>If an ASM instance fails, the dependent RDBMS instances using it will abort.
RMAN is the only tool that can backup ASM files.</p></div>
<div class="paragraph"><p><u>Test:</u> 0 error (2013-04-03)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_21_the_resource_manager">8. Chapter 21: The Resource Manager</h2>
<div class="sectionbody">
<div class="paragraph"><p><code>RESOURCE_LIMITS</code> parameter has nothing to do with the Resource Manager. It has to do with the PROFILES.</p></div>
<div class="paragraph"><p>The <code>RESOURCE_MANAGER_PLAN</code> instance parameter (that defaults to DEFAULT_MAINTENANCE_PLAN) is the way to control Resource Manager. It can also be set using the scheduler or with the <code>DBMS_RESOURCE_MANAGER.SWITCH_PLAN</code> procedure.</p></div>
<div class="paragraph"><p><code>DBMS_RESOURCE_MANAGER_PRIVS</code> package is used to put users into consumer groups and to grant system privileges necessary to administer the Resource Manager. The corresponding role (<code>ADMINISTER RESOURCE MANAGER</code>) cannot be granted or revoked other way than using this package.</p></div>
<div class="paragraph"><p>Every user can switch its consumer group using the <code>DBMS_SESSION.SWITCH_CURRENT_CONSUMER_GROUP</code> procedure.</p></div>
<div class="paragraph"><p>A user with rights to administer Resource Manager can use:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>DBMS_RESOURCE_MANAGER.SWITCH_CONSUMER_GROUP_FOR_USER</code> to switch all the sessions connected with a user to a given consumer group
</p>
</li>
<li>
<p>
<code>DBMS_RESOURCE_MANAGER.SWITHC_CONSUMER_GROUP_FOR_SESS</code> to switch a given session to a given consumer group
</p>
</li>
</ul></div>
<div class="paragraph"><p>There are 4 priority levels that can be used in a plan.</p></div>
<div class="paragraph"><p>Memory allocated to Resource Manager is the Pending Area (part of the SGA). It is also used to validate a plan before saving it.</p></div>
<div class="paragraph"><p>Every plan must include the <code>OTHER_GROUP</code> group; otherwise, the validation will fail in the pending area and the plan will not be saved in the data dictionnary.</p></div>
<div class="paragraph"><p>Active session in Resource Manager vocabulary includes running sessions and idle sessions with uncommited transaction(s).</p></div>
<div class="paragraph"><p><u>Test:</u> 5 errors Q1,2,3,10,11 (2013-04-05)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_22_the_scheduler">9. Chapter 22: The scheduler</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
CQJ0
</dt>
<dd>
<p>
Job Coordinator process. It monitors <code>DBA_SCHEDULER_JOBS</code> view and launches the <code>Jnnn</code> process to run a job.
</p>
</dd>
</dl></div>
<div class="paragraph"><p><code>JOB_QUEUE_PROCESS</code> instance parameter limits the max number (0 to 1000 and defaults to 1000) of Jnnn that can be launched. If set to 0, the scheduler will not function.</p></div>
<div class="paragraph"><p>By default jobs and programs are disabled in the scheduler at creation time.</p></div>
<div class="paragraph"><p>Job class is used to associate 1 or more job with a Resource Manager consumer group and also to control logging levels.</p></div>
<div class="paragraph"><p>The <code>MANAGE SCHEDULER</code> system privilege is needed to create job classes and windows and to force windows to open or close irrespective of their schedules.</p></div>
<div class="paragraph"><p>PROGRAMS and JOBS share the same namespace &#8658; They cannot have the same name! The same is true for SCHEDULES and WINDOWS.</p></div>
<div class="paragraph"><p>You cannot create lightweight jobs using Database Control. Only the <code>DBMS_SCHEDULER</code> package enables you to do that.</p></div>
<div class="paragraph"><p>A lightweight job has always AUTO_DROP to <strong>TRUE</strong> and END_DATE defaulting to current timestamp.</p></div>
<div class="paragraph"><p>Priorities cannot be set on creation of the job. You must use the <code>DBMS_SCHEDULER.SET_ATTRIBUTE</code> procedure.</p></div>
<div class="paragraph"><p>Jobs priorities within a class are from 1 to 5 (highest to lowest).</p></div>
<div class="paragraph"><p><strong>Only one window an be open at once</strong>. Other things being equal, the window with the longest to run will open or remain open if 2 windows are overlapping and having the same priority.</p></div>
<div class="paragraph"><p><u>Test:</u> 2 errors Q5,8 (2013-04-06)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_23_moving_and_reorganizing_data">10. Chapter 23: Moving and reorganizing data</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sql_loader">10.1. SQL*Loader</h3>
<div class="paragraph"><p>SQL*Loader can use either binded insert with normal commit or <code>direct path loads</code> that will skip buffer cache (can even skip redo), generate no UNDO, writes directly above HWM and move HWM at the end of the work.</p></div>
<div class="paragraph"><p>Direct path loads have drawbacks:</p></div>
<div class="ulist"><ul>
<li>
<p>
Referential integrity contraints must be dropped or disabled for the duration of the operation (except for unique, not null &amp; PK)
</p>
</li>
<li>
<p>
Insert triggers are not fired
</p>
</li>
<li>
<p>
Table will be locked against DML from other sessions
</p>
</li>
<li>
<p>
Cannot be used against clustered tables
</p>
</li>
</ul></div>
<div class="paragraph"><p>Only <strong>UNIQUE</strong>, <strong>NOT NULL</strong> and PK constraints are enforced during a direct path load.</p></div>
<div class="paragraph"><p>SQL*Loader use:</p></div>
<div class="ulist"><ul>
<li>
<p>
Input files (data)
</p>
</li>
<li>
<p>
Control files (settings and format)
</p>
</li>
<li>
<p>
Log files
</p>
</li>
<li>
<p>
Bad files (formatting errors or not matching DB integrity constraints)
</p>
</li>
<li>
<p>
Reject files (correct input but do not match some record selection criterion)
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_directories_amp_external_tables">10.2. Directories &amp; external tables</h3>
<div class="paragraph"><p>Directories are always owned by SYS user even if not created by SYS. So having created a directory do not mean that you will be able to drop it!</p></div>
<div class="paragraph"><p>External tables relies on oracle&#8217;s "DIRECTORIES" objects just as DATAPUMP do.</p></div>
<div class="paragraph"><p>External tables cannot have indexes, constraints or triggers.</p></div>
</div>
<div class="sect2">
<h3 id="_datapump">10.3. DataPump</h3>
<div class="paragraph"><p>When a DataPump job is launched, at least 2 processes are started:</p></div>
<div class="ulist"><ul>
<li>
<p>
The <code>DMnn</code>: DataPump Master process (one by datapump job)
</p>
</li>
<li>
<p>
One or more <code>DWnn</code>: Worker processes. If parallelism is enabled, each DWnn may make use of 2 or more parallel execution server processes named <code>Pnnn</code>.
</p>
</li>
</ul></div>
<div class="paragraph"><p>2 queues are created for each datapump jobs:</p></div>
<div class="ulist"><ul>
<li>
<p>
A control queue: Individual tasks to make up the job are placed in the control queue by the DMnn process. DWnn process pick up these tasks and execute them.
</p>
</li>
<li>
<p>
A status queue: DMnn place messages in the status queue to describe the state of the job. Any session with appropriate privileges can query the queue to monitor the job&#8217;s progress.
</p>
</li>
</ul></div>
<div class="paragraph"><p>There are 3 datapump file types:</p></div>
<div class="ulist"><ul>
<li>
<p>
SQL files
</p>
</li>
<li>
<p>
Log files
</p>
</li>
<li>
<p>
Dump files
</p>
</li>
</ul></div>
<div class="paragraph"><p>Directory (or directories) can be specified to a datapump job at 4 levels (in order of precedence):</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
A per-file within the datapump job
</p>
</li>
<li>
<p>
A parameter applied to the whole datapump job at command-line level
</p>
</li>
<li>
<p>
The <code>DATAPUMP_DIR</code> environment variable
</p>
</li>
<li>
<p>
The <code>DATA_PUMP_DIR</code> directory
</p>
</li>
</ol></div>
<div class="paragraph"><p>Datapump has 2 methods for loading and unloading data:</p></div>
<div class="ulist"><ul>
<li>
<p>
Direct path: works the same way as for SQL*Loader
</p>
</li>
<li>
<p>
External table path: uses SELECT and INSERT statements using the buffer cache, UNDO, REDO and regular COMMIT mechanisms.
</p>
</li>
</ul></div>
<div class="paragraph"><p>DBA has no control of which method is used. Datapump makes the decision himself based on the complexity of the objects (ie: simply structured data such as table heap with no triggers &#8658; direct path). In either case, the generated file is identical.</p></div>
</div>
<div class="sect2">
<h3 id="_transportable_tablespaces">10.4. Transportable tablespaces</h3>
<div class="paragraph"><p>Transportable tablespaces requires data to be converted to the endian format. To transport tablespace accross platforms with a different endian requires converting datafiles. You do this using the <code>CONVERT</code> RMAN command.</p></div>
</div>
<div class="sect2">
<h3 id="_tables_reorganization">10.5. Tables reorganization</h3>
<div class="paragraph"><p><code>DBA_RESUMABLE</code> view lists all suspended sessions. Resumable can be set:</p></div>
<div class="ulist"><ul>
<li>
<p>
at session level using <code>ALTER SESSION ENABLE RESUMABLE [TIMEOUT &lt;seconds&gt;] [name &lt;operation_name&gt;];</code>. TIMEOUT defauts to infinite; NAME is the name that would appear in DBA_RESUMABLE
</p>
</li>
<li>
<p>
at system level by setting the <code>RESUMABLE_TIMEOUT</code> instance parameter
</p>
</li>
</ul></div>
<div class="paragraph"><p>Row migration is caused by UPDATE statement. INSERT or DELETE can NEVER cause row migration.</p></div>
<div class="paragraph"><p>Reorganizing a table with a MOVE will render all associated indexes unusable.</p></div>
<div class="paragraph"><p>A MOVE operation will lock the table against DML. You cannot move a table if there is an uncommited transaction against it.</p></div>
<div class="paragraph"><p>To find chained rows, use the <code>ANALYZE</code> command, <strong>NOT</strong> <code>DBMS_STATS</code> package. Then go to the <code>CHAIN_CNT</code> of the <code>DBA_TABLES</code>. If the <code>AVG_ROW_LEN</code> is less than the block size, these are migrated rows; if it is greater, they will be chained rows.</p></div>
<div class="paragraph"><p>Tables in tablespace that use the older freelist technique for managing segment space usage cannot be shrunk.</p></div>
<div class="paragraph"><p>You CANNOT <code>SHRINK</code> a table that:</p></div>
<div class="ulist"><ul>
<li>
<p>
has a column of type <code>LONG</code>
</p>
</li>
<li>
<p>
has a materialize view defined with <code>REFRESH ON COMMIT</code>
</p>
</li>
<li>
<p>
has not row movement enabled
</p>
</li>
</ul></div>
<div class="paragraph"><p>MMON process is responsible of raising an alert when a tablespace usage treshold is reached. DB Control reports it.</p></div>
<div class="paragraph"><p><u>Test:</u> 2 errors Q8,9 (2013-04-06)</p></div>
<div class="paragraph"><p><u>Test:</u> 3 errors Q3,6,8 (2013-05-07)</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_25_performance_tunning">11. Chapter 25: Performance Tunning</h2>
<div class="sectionbody">
<div class="paragraph"><p>There will be 3 stages of PGA memory allocation:</p></div>
<div class="ulist"><ul>
<li>
<p>
Optimal: The whole SORT of data is made into memory.
</p>
</li>
<li>
<p>
One-pass: The SORT is made by batch of rows into memory. Each batch is written to disk and a final MERGE is made in memory.
</p>
</li>
<li>
<p>
Multipass: Both SORT and MERGE are separated into batches, sorted and written to disk.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The LOG_BUFFER is the only SGA structure that cannot be adjusted dynamically. It cannot therefore be automatically generated.</p></div>
<div class="paragraph"><p>If AMM (<code>MEMORY_TARGET</code>) is set and that you also set <code>PGA_AGGREGATE_TARGET</code> and <code>SGA_TARGET</code>, these will be considered as <strong>MINIMUM</strong>. AMM will never reduce PGA and SGA beneath those sizes.</p></div>
<div class="paragraph"><p>When Automatic Memory Management is enabled, the individual advisors (which are necessary for AMM to function) can be seen in V$ views, but only the overall advisor is displayed by Database Control.</p></div>
<div class="paragraph"><p>Automatic memory management cannot function unless the <code>statistics_level</code> instance parameter is set to TYPICAL (which is the default) or ALL.</p></div>
<div class="paragraph"><p>Memory advisor views: <code>v$memory_target_advice</code>, <code>v$sga_target_advice</code> and <code>v$pga_target_advice</code></p></div>
<div class="paragraph"><p>An invalid object may become valid on next access, but unusable indexes must be made valid by manual rebuild.</p></div>
<div class="sect2">
<h3 id="_sql_tuning_advisor">11.1. SQL Tuning Advisor</h3>
<div class="paragraph"><p>Inputs of SQL Tuning Advisor are SQL statement(s) from:</p></div>
<div class="ulist"><ul>
<li>
<p>
the library cache (in shared pool)
</p>
</li>
<li>
<p>
a precreated set of SQL statements
</p>
</li>
<li>
<p>
the AWR
</p>
</li>
<li>
<p>
a manually given SQL statement
</p>
</li>
</ul></div>
<div class="paragraph"><p>SQL Tuning Advisor advises upon:</p></div>
<div class="ulist"><ul>
<li>
<p>
statistics
</p>
</li>
<li>
<p>
SQL profiles creation
</p>
</li>
<li>
<p>
Indexes creation
</p>
</li>
<li>
<p>
Materialized views creation (not modifications!)
</p>
</li>
<li>
<p>
Partitionning
</p>
</li>
<li>
<p>
revision of SQL statement
</p>
</li>
</ul></div>
<div class="paragraph"><p>Package to use the SQL Tuning Advisor: <code>DBMS_SQLTUNE</code>. To launch SQL Tuning Advisor job manually, use <code>DBMS_SQLTUNE.EXECUTE_TUNNING_TASK</code>.</p></div>
<div class="paragraph"><p>Views to use with the SQL Tuning Advisor: <code>DBA_ADVISOR_LOG</code>, <code>DBA_/USER_ADVISOR_TASKS</code> and <code>V$ADVISOR_PROGRESS</code>.</p></div>
</div>
<div class="sect2">
<h3 id="_sql_access_advisor">11.2. SQL Access Advisor</h3>
<div class="paragraph"><p>Inputs of SQL Access Advisor can be:</p></div>
<div class="ulist"><ul>
<li>
<p>
A single SQL statement
</p>
</li>
<li>
<p>
A SQL statement tuning set
</p>
</li>
<li>
<p>
Current SQL cache contents
</p>
</li>
<li>
<p>
A hypothetical workload imputed from the DDL of a set of objects
</p>
</li>
</ul></div>
<div class="paragraph"><p>SQL Access Advisor can recommend changes to Materialize views, changing indexes and partitionning, and enabling query rewrite. But only SQL Access Advisor recommends changes to Materialized views (including their creation).</p></div>
<div class="paragraph"><p>Package to use the SQL Access Advisor: <code>DBMS_ADVISOR</code>. To launch SQL Access Advisor job manually, use <code>DBMS_ADVISOR.QUICK_TUNE</code>.</p></div>
</div>
<div class="sect2">
<h3 id="_database_replay">11.3. Database replay</h3>
<div class="paragraph"><p>Database Replay consists of four steps:
 . workload capture
 . workload preprocessing
 . workload replay
 . analysis and reporting</p></div>
<div class="paragraph"><p>Are <strong>NOT</strong> included in capture:
 * SQL*Loader operations
 * Oracle Streams
 * flashback queries
 * distributed transactions
 * remote DESCRIBE or COMMIT commands</p></div>
<div class="paragraph"><p><u>Test:</u> 5 errors Q4,12,14,16,18 (2013-04-08)</p></div>
<div class="paragraph"><p><u>Test:</u> 7 errors Q9,12,13,14,15,16,18 (2013-05-07)</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_26_globalization">12. Chapter 26: Globalization</h2>
<div class="sectionbody">
<div class="paragraph"><p>Globalization settings can be specified at the following levels (in order or precedence):</p></div>
<div class="ulist"><ul>
<li>
<p>
Database: view is <code>nls_database_parameters</code> (hard to change after DB creation)
</p>
</li>
<li>
<p>
Instance: view is <code>nls_instance_parameters</code>
</p>
</li>
<li>
<p>
Client environment: viewed in shell environment and on session it impacts
</p>
</li>
<li>
<p>
Session: views are <code>V$NLS_PARAMETERS</code> and <code>nls_session_parameters</code>
</p>
</li>
<li>
<p>
Statements: for example, through functions like <code>TO_CHAR(&lt;column&gt;, 'Day dd, Month YYYY', 'NLS_DATE_LANGUAGE=DUTCH')</code>
</p>
</li>
</ul></div>
<div class="paragraph"><p>Since release 9i, the National Character Set of the database can only be unicode (but the database characterset can be something else) &#8658; UTF8 (variable size) and AL16UTF16 (fixed-width).</p></div>
<div class="paragraph"><p><code>NLS_DATE_LANGUAGE</code> and <code>NLS_SORT</code> are controlled by <code>NLS_LANGUAGE</code>.</p></div>
<div class="paragraph"><p><code>NLS_DATE_FORMAT</code> and <code>NLS_NUMERIC_CHARACTERS</code> are controlled by <code>NLS_TERRITORY</code>.</p></div>
<div class="paragraph"><p><code>V$NLS_VALID_VALUES</code> lists the supported values for the various NLS parameters.</p></div>
<div class="paragraph"><p><u>Test:</u> 3 errors Q6,9,11 (2013-04-10)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_chapter_27_the_intelligent_infrastructure">13. Chapter 27: The Intelligent Infrastructure</h2>
<div class="sectionbody">
<div class="paragraph"><p>The ADR is a central file-based repository for all diagnostic information. This includes various dumps and trace files, the alert log, and health monitor reports.</p></div>
<div class="paragraph"><p><code>ADR_BASE</code> defaults to (in order of precedence):</p></div>
<div class="ulist"><ul>
<li>
<p>
DIAGNOSTIC_DEST/diag
</p>
</li>
<li>
<p>
ORACLE_BASE/diag (if DIAGNOSTIC_DEST instance parameter is not set)
</p>
</li>
<li>
<p>
ORACLE_HOME/log (if ORACLE_BASE environment variable is not set)
</p>
</li>
</ul></div>
<div class="paragraph"><p>A problem is a critical error in the database or the instance. An incident is an occurrence of a problem. An incident package is a collection of data regarding one or more incidents and problems, formatted for upload to Oracle Support Services as part of an SR.</p></div>
<div class="paragraph"><p>Before the REFRESHFROMMETALINK job can run, Database Control must be able to make an outbound HTTP connection to My Oracle Support website.</p></div>
<div class="paragraph"><p>Using the EM Workbench Support, you can create full or incremental packages, add or remove trace files to a package and add SQL test cases to the package.</p></div>
<div class="paragraph"><p><u>Test:</u> 3 errors Q5,6,8 (2013-04-10)</p></div>
<div class="paragraph"><p><u>Test:</u> 5 errors Q2,3,4,6,8 (2013-05-07)</p></div>
</div>
</div>
    </div>
    <div class="col-xs-6 col-sm-3  col-md-3 cold-lg-3 sidebar-offcanvas" id="sidebar"
        role="navigation">
      <div class="well sidebar-nav">
        <div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
      </div><!--/.well -->
      <div class="well sidebar-nav">
        <ul class="nav" id="index_page_idx">
          <li>Documents in this category</li>
        </ul>
      </div>
    </div>
  </div>
</div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <!-- <script type="text/javascript" src="/custom_/js/jquery.js"></script> -->
  <script type="text/javascript" src="//code.jquery.com/jquery.min.js"></script>
  <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="/custom_/js/custom_jquery_twbs.js"></script>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Version 1.0.2<br />
Last updated 2013-10-29 14:10:51 CET
</div>
</div>
</div>
</body>
</html>
